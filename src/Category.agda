module Category where

open import Prelude


record Category {â„“ â„“â€²}
                (ğ’ª : Set â„“) (_â–¹_ : ğ’ª â†’ ğ’ª â†’ Set â„“â€²)
              : Set (â„“ âŠ” â„“â€²) where
  field
    idâ‚“    : âˆ€ {x} â†’ x â–¹ x

    _â‹„_    : âˆ€ {x xâ€² xâ€³} â†’ xâ€² â–¹ x â†’ xâ€³ â–¹ xâ€² â†’ xâ€³ â–¹ x

    idâ‚â‹„   : âˆ€ {x xâ€²} â†’ (Î¾ : xâ€² â–¹ x)
                      â†’ idâ‚“ â‹„ Î¾ â‰¡ Î¾

    idâ‚‚â‹„   : âˆ€ {x xâ€²} â†’ (Î¾ : xâ€² â–¹ x)
                      â†’ Î¾ â‹„ idâ‚“ â‰¡ Î¾

    assocâ‹„ : âˆ€ {x xâ€² xâ€³ xâ€´} â†’ (Î¾â‚ : xâ€´ â–¹ xâ€³) (Î¾â‚‚ : xâ€³ â–¹ xâ€²) (Î¾â‚ƒ : xâ€² â–¹ x)
                            â†’ (Î¾â‚ƒ â‹„ Î¾â‚‚) â‹„ Î¾â‚ â‰¡ Î¾â‚ƒ â‹„ (Î¾â‚‚ â‹„ Î¾â‚)


ğ—¦ğ—²ğ˜ : (â„“ : Level) â†’ Category (Set â„“) Î 
ğ—¦ğ—²ğ˜ â„“ =
  record
    { idâ‚“    = id
    ; _â‹„_    = Î» g f â†’ g âˆ˜ f
    ; idâ‚â‹„   = Î» f â†’ refl
    ; idâ‚‚â‹„   = Î» f â†’ refl
    ; assocâ‹„ = Î» h g f â†’ refl
    }

ğ—¦ğ—²ğ˜â‚€ : Category (Set â„“â‚€) Î 
ğ—¦ğ—²ğ˜â‚€ = ğ—¦ğ—²ğ˜ â„“â‚€


record Functor {â„“â‚ â„“â‚â€² â„“â‚‚ â„“â‚‚â€²}
               {ğ’ªâ‚ : Set â„“â‚} {_â–¹â‚_ : ğ’ªâ‚ â†’ ğ’ªâ‚ â†’ Set â„“â‚â€²}
               {ğ’ªâ‚‚ : Set â„“â‚‚} {_â–¹â‚‚_ : ğ’ªâ‚‚ â†’ ğ’ªâ‚‚ â†’ Set â„“â‚‚â€²}
               (ğ—– : Category ğ’ªâ‚ _â–¹â‚_) (ğ—— : Category ğ’ªâ‚‚ _â–¹â‚‚_)
             : Set (â„“â‚ âŠ” â„“â‚â€² âŠ” â„“â‚‚ âŠ” â„“â‚‚â€²) where
  private
    module C = Category ğ—–
    module D = Category ğ——
  field
    Ï†â‚“   : ğ’ªâ‚ â†’ ğ’ªâ‚‚

    Ï†â‚˜   : âˆ€ {x xâ€²} â†’ xâ€² â–¹â‚ x â†’ Ï†â‚“ xâ€² â–¹â‚‚ Ï†â‚“ x

    idÏ†â‚˜ : âˆ€ {x} â†’ Ï†â‚˜ (C.idâ‚“ {x = x}) â‰¡ D.idâ‚“

    Ï†â‚˜â‹„  : âˆ€ {x xâ€² xâ€³} â†’ (Î¾â‚ : xâ€³ â–¹â‚ xâ€²) (Î¾â‚‚ : xâ€² â–¹â‚ x)
                       â†’ Ï†â‚˜ (Î¾â‚‚ C.â‹„ Î¾â‚) â‰¡ Ï†â‚˜ Î¾â‚‚ D.â‹„ Ï†â‚˜ Î¾â‚


record NaturalTransformation {â„“â‚ â„“â‚â€² â„“â‚‚ â„“â‚‚â€²}
                             {ğ’ªâ‚ : Set â„“â‚} {_â–¹â‚_ : ğ’ªâ‚ â†’ ğ’ªâ‚ â†’ Set â„“â‚â€²}
                             {ğ’ªâ‚‚ : Set â„“â‚‚} {_â–¹â‚‚_ : ğ’ªâ‚‚ â†’ ğ’ªâ‚‚ â†’ Set â„“â‚‚â€²}
                             {ğ—– : Category ğ’ªâ‚ _â–¹â‚_} {ğ—— : Category ğ’ªâ‚‚ _â–¹â‚‚_}
                             (ğ—™ ğ—š : Functor ğ—– ğ——)
                           : Set (â„“â‚ âŠ” â„“â‚â€² âŠ” â„“â‚‚ âŠ” â„“â‚‚â€²) where
  private
    module C = Category ğ—–
    module D = Category ğ——
    module F = Functor ğ—™
    module G = Functor ğ—š
  field
    Ï•    : âˆ€ {x} â†’ F.Ï†â‚“ x â–¹â‚‚ G.Ï†â‚“ x

    natÏ• : âˆ€ {x xâ€²} â†’ (m : xâ€² â–¹â‚ x)
                    â†’ (Ï• D.â‹„ F.Ï†â‚˜ m) â‰¡ (G.Ï†â‚˜ m D.â‹„ Ï•)


Opposite : âˆ€ {â„“ â„“â€²} â†’ {ğ’ª : Set â„“} {_â–¹_ : ğ’ª â†’ ğ’ª â†’ Set â„“â€²}
                    â†’ Category ğ’ª _â–¹_
                    â†’ Category ğ’ª (flip _â–¹_)
Opposite ğ—– =
  record
    { idâ‚“    = C.idâ‚“
    ; _â‹„_    = flip C._â‹„_
    ; idâ‚â‹„   = C.idâ‚‚â‹„
    ; idâ‚‚â‹„   = C.idâ‚â‹„
    ; assocâ‹„ = Î» Î¾â‚ Î¾â‚‚ Î¾â‚ƒ â†’ C.assocâ‹„ Î¾â‚ƒ Î¾â‚‚ Î¾â‚ â»Â¹
    }
  where
    module C = Category ğ—–


Presheaf : âˆ€ â„“ {â„“â€² â„“â€³} â†’ {ğ’ª : Set â„“â€²} {_â–¹_ : ğ’ª â†’ ğ’ª â†’ Set â„“â€³}
                       â†’ (ğ—– : Category ğ’ª _â–¹_)
                       â†’ Set _
Presheaf â„“ ğ—– = Functor (Opposite ğ—–) (ğ—¦ğ—²ğ˜ â„“)

Presheafâ‚€ : âˆ€ {â„“ â„“â€²} â†’ {ğ’ª : Set â„“} {_â–¹_ : ğ’ª â†’ ğ’ª â†’ Set â„“â€²}
                     â†’ (ğ—– : Category ğ’ª _â–¹_)
                     â†’ Set _
Presheafâ‚€ ğ—– = Presheaf â„“â‚€ ğ—–
